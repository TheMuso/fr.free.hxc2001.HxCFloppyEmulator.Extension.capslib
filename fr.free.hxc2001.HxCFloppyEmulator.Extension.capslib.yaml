id: fr.free.hxc2001.HxCFloppyEmulator.Extension.capslib
branch: 1-19.08
runtime: fr.free.hxc2001.HxCFloppyEmulator
runtime-version: stable
sdk: org.freedesktop.Sdk//19.08
build-extension: true
separate-locales: false
appstream-compose: false
build-options:
  prefix: ${FLATPAK_DEST}
modules:
  - name: capslib
    buildsystem: simple
    build-commands: 
      - install -D apply_extra "${FLATPAK_DEST}/bin/apply_extra"
    post-install:
      - install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo fr.free.hxc2001.HxCFloppyEmulator.Extension.capslib.metainfo.xml
      - appstream-compose --basename=fr.free.hxc2001.HxCFloppyEmulator.Extension.capslib --prefix=${FLATPAK_DEST} --origin=flatpak fr.free.hxc2001.HxCFloppyEmulator.Extension.capslib
    sources: 
      - type: script
        dest-filename: apply_extra
        commands:
          - unzip capslib.zip
          - install -Dm644 -t /app/lib libcapsimage.so.5.1
      - type: file
        path: fr.free.hxc2001.HxCFloppyEmulator.Extension.capslib.metainfo.xml
      - type: extra-data
        url: https://eab.abime.net/attachment.php?attachmentid=40323&d=1403379344
        sha256: 9de0efef7a0584ee2ea7eee37c35859329f6f8e384a888ab2a314d530a135096
        size: 190015
        filename: capslib.zip